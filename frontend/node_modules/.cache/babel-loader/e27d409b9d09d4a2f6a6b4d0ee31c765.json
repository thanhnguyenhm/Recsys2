{"ast":null,"code":"import _regeneratorRuntime from\"/Users/thanhnguyen/Library/Mobile Documents/com~apple~CloudDocs/CSU/SJSU/CS160/Workspace/Recsys_new/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/thanhnguyen/Library/Mobile Documents/com~apple~CloudDocs/CSU/SJSU/CS160/Workspace/Recsys_new/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/thanhnguyen/Library/Mobile Documents/com~apple~CloudDocs/CSU/SJSU/CS160/Workspace/Recsys_new/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/thanhnguyen/Library/Mobile Documents/com~apple~CloudDocs/CSU/SJSU/CS160/Workspace/Recsys_new/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/thanhnguyen/Library/Mobile Documents/com~apple~CloudDocs/CSU/SJSU/CS160/Workspace/Recsys_new/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/thanhnguyen/Library/Mobile Documents/com~apple~CloudDocs/CSU/SJSU/CS160/Workspace/Recsys_new/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/thanhnguyen/Library/Mobile Documents/com~apple~CloudDocs/CSU/SJSU/CS160/Workspace/Recsys_new/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import{Rating,Card,Image}from'semantic-ui-react';import no_img from'./no_image.png';import{rate}from'./UserFunctions';import jwt_decode from'jwt-decode';import MovieDetails from'./MovieDetails';var MovieModule=/*#__PURE__*/function(_Component){_inherits(MovieModule,_Component);function MovieModule(props){var _this;_classCallCheck(this,MovieModule);_this=_possibleConstructorReturn(this,_getPrototypeOf(MovieModule).call(this,props));_this.state={showMovieDetails:false};return _this;}_createClass(MovieModule,[{key:\"toggleMovieDetails\",value:function toggleMovieDetails(){this.setState({showMovieDetails:!this.state.showMovieDetails});}},{key:\"render\",value:function render(){var _this2=this;var img_src=\"\";if(this.props.movie.poster===\"#N/A\"){img_src=no_img;}else{img_src=\"http://image.tmdb.org/t/p/w300\"+this.props.movie.poster;}if(this.props.rated)return React.createElement(\"div\",{className:\"dib pa3 grow\"},React.createElement(Card,null,React.createElement(Image,{src:img_src,wrapped:true,ui:false,onClick:this.toggleMovieDetails.bind(this)}),React.createElement(Card.Content,null,React.createElement(Card.Header,null,this.props.movie.title)),React.createElement(Card.Content,null,React.createElement(Rating,{rating:this.props.movie.rating,size:\"massive\",icon:\"star\",maxRating:5,clearable:true,onRate:/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(_,data){var token,decoded,user,title,rating,movie;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!localStorage.usertoken){window.alert(\"Your rating is not saved. You need to log in first.\");}else{token=localStorage.usertoken;decoded=jwt_decode(token);user=decoded.identity.username;title=_this2.props.movie.title;rating=data.rating;movie={title:title,rating:rating,user:user};rate(movie);}// window.location.reload() // can't reload because rate takes longer time to process in production environment\ncase 1:case\"end\":return _context.stop();}}},_callee);}));return function(_x,_x2){return _ref.apply(this,arguments);};}()}))),this.state.showMovieDetails?React.createElement(MovieDetails,{id:this.props.movie.id,close:this.toggleMovieDetails.bind(this)}):null);else{return React.createElement(\"div\",{className:\"dib pa3 grow\"},React.createElement(Card,null,React.createElement(Image,{src:img_src,wrapped:true,ui:false,onClick:this.toggleMovieDetails.bind(this)}),React.createElement(Card.Content,null,React.createElement(Card.Header,null,this.props.movie.title)),React.createElement(Card.Content,null,React.createElement(Rating,{size:\"massive\",icon:\"star\",maxRating:5,clearable:true,onRate:/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(_,data){var token,decoded,user,title,rating,movie;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!localStorage.usertoken){window.alert(\"Your rating is not saved. You need to log in first.\");}else{token=localStorage.usertoken;decoded=jwt_decode(token);user=decoded.identity.username;title=_this2.props.movie.title;rating=data.rating;movie={title:title,rating:rating,user:user};rate(movie);}// window.location.reload() // can't reload because rate takes longer time to process in production environment\ncase 1:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x3,_x4){return _ref2.apply(this,arguments);};}()}))),this.state.showMovieDetails?React.createElement(MovieDetails,{id:this.props.movie.id,close:this.toggleMovieDetails.bind(this)}):null);}}}]);return MovieModule;}(Component);// PropTypes\nexport default MovieModule;","map":{"version":3,"sources":["/Users/thanhnguyen/Library/Mobile Documents/com~apple~CloudDocs/CSU/SJSU/CS160/Workspace/Recsys_new/frontend/src/components/MovieModule.js"],"names":["React","Component","Rating","Card","Image","no_img","rate","jwt_decode","MovieDetails","MovieModule","props","state","showMovieDetails","setState","img_src","movie","poster","rated","toggleMovieDetails","bind","title","rating","_","data","localStorage","usertoken","window","alert","token","decoded","user","identity","username","id"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Rating, Card, Image } from 'semantic-ui-react'\nimport PropTypes from 'prop-types';\nimport no_img from './no_image.png'\nimport { rate } from './UserFunctions'\nimport jwt_decode from 'jwt-decode'\nimport MovieDetails from './MovieDetails'\n\nclass MovieModule extends Component {\n    constructor(props) {\n        super(props);\n        this.state = { showMovieDetails: false};\n    }\n\n    toggleMovieDetails() {\n        this.setState({\n            showMovieDetails: !this.state.showMovieDetails\n        });\n    }\n    render() {\n\n        var img_src = \"\";\n        if (this.props.movie.poster === \"#N/A\") {\n            img_src = no_img;\n        } else {\n            img_src = \"http://image.tmdb.org/t/p/w300\" + this.props.movie.poster;\n        }\n\n        if (this.props.rated)\n            return (\n                <div className='dib pa3 grow'>\n                    <Card>\n                        <Image src={img_src} wrapped ui={false}  onClick={this.toggleMovieDetails.bind(this)}/>\n                        <Card.Content>\n                            <Card.Header>{this.props.movie.title}</Card.Header>\n                        </Card.Content> \n                        <Card.Content>\n                            <Rating \n                            rating = {this.props.movie.rating}\n                            size='massive' \n                            icon='star' \n                            maxRating={5}\n                            clearable \n                            onRate={async (_, data) => {\n                                if (!localStorage.usertoken) {\n                                    window.alert(\"Your rating is not saved. You need to log in first.\");\n                                }\n                                else {\n                                    const token = localStorage.usertoken\n                                    const decoded = jwt_decode(token)\n                                    const user = decoded.identity.username;\n                                    const title = this.props.movie.title;\n                                    const rating = data.rating;\n                                    const movie = { title, rating, user};\n                                    rate(movie);\n                                }  \n                                // window.location.reload() // can't reload because rate takes longer time to process in production environment\n                                \n                            }}\n                            \n                            />\n                        </Card.Content> \n                        \n                    </Card>\n                    {this.state.showMovieDetails ?\n                        <MovieDetails id={this.props.movie.id} close={this.toggleMovieDetails.bind(this)}/>\n                        : null\n                        }\n                </div>  \n            )\n            else {\n            return (\n                <div className='dib pa3 grow'>\n                    <Card>\n                        <Image src={img_src} wrapped ui={false} onClick={this.toggleMovieDetails.bind(this)} />\n                        <Card.Content>\n                            <Card.Header>{this.props.movie.title}</Card.Header>\n                        </Card.Content>\n                        <Card.Content>\n                            <Rating\n                                size='massive'\n                                icon='star'\n                                maxRating={5}\n                                clearable\n                                onRate={async (_, data) => {\n                                    if (!localStorage.usertoken) {\n                                        window.alert(\"Your rating is not saved. You need to log in first.\");\n                                    }\n                                    else {\n                                        const token = localStorage.usertoken\n                                        const decoded = jwt_decode(token)\n                                        const user = decoded.identity.username;\n                                        const title = this.props.movie.title;\n                                        const rating = data.rating;\n                                        const movie = { title, rating, user };\n                                        rate(movie);\n                                    }\n                                    // window.location.reload() // can't reload because rate takes longer time to process in production environment\n\n                                }}\n\n                            />\n                        </Card.Content>\n\n                    </Card>\n                    {this.state.showMovieDetails ?\n                        <MovieDetails id={this.props.movie.id} close={this.toggleMovieDetails.bind(this)} />\n                        : null\n                    }\n                </div>\n            )\n            }\n    }\n}\n\n\n// PropTypes\nMovieModule.propTypes = {\n    movie: PropTypes.object.isRequired\n}\n\nexport default MovieModule;"]},"metadata":{},"sourceType":"module"}